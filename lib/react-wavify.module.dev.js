import t,{Component as e}from"react";import i from"prop-types";function r(){return r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},r.apply(this,arguments)}function n(t,e){return n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(t,e)}function s(t,e){if(null==t)return{};var i,r,n={},s=Object.keys(t);for(r=0;r<s.length;r++)e.indexOf(i=s[r])>=0||(n[i]=t[i]);return n}var a=["style","className","fill","paused","children","id","d","ref","height","amplitude","speed","points"],o=/*#__PURE__*/function(e){var i,o;function p(i){var r;return(r=e.call(this,i)||this)._width=function(){return r._container.current.offsetWidth},r._height=function(){return r._container.current.offsetHeight},r._container=t.createRef(),r.state={path:""},r._lastUpdate=0,r._elapsed=0,r._step=0,r._update=r._update.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r)),r}o=e,(i=p).prototype=Object.create(o.prototype),i.prototype.constructor=i,n(i,o);var h=p.prototype;return h._calculateWavePoints=function(){for(var t=[],e=0;e<=Math.max(this.props.points,1);e++){var i=e/this.props.points*this._width(),r=(this._step+(e+e%this.props.points))*this.props.speed*100,n=Math.sin(r/100)*this.props.amplitude,s=Math.sin(r/100)*n+this.props.height;t.push({x:i,y:s})}return t},h._buildPath=function(t){var e="M "+t[0].x+" "+t[0].y,i={x:(t[1].x-t[0].x)/2,y:t[1].y-t[0].y+t[0].y+(t[1].y-t[0].y)},r=function(t,e){return" C "+t.x+" "+t.y+" "+t.x+" "+t.y+" "+e.x+" "+e.y};e+=r(i,t[1]);for(var n=i,s=1;s<t.length-1;s++)e+=r(n={x:t[s].x-n.x+t[s].x,y:t[s].y-n.y+t[s].y},t[s+1]);return(e+=" L "+this._width()+" "+this._height())+" L 0 "+this._height()+" Z"},h._redraw=function(){this.setState({path:this._buildPath(this._calculateWavePoints())})},h._draw=function(){if(!this.props.paused){var t=new Date;this._elapsed+=t-this._lastUpdate,this._lastUpdate=t}this._step=this._elapsed*Math.PI/1e3,this._redraw()},h._update=function(){this._draw(),this._frameId&&this._resume()},h._resume=function(){this._frameId=window.requestAnimationFrame(this._update),this._lastUpdate=new Date},h.componentDidMount=function(){this._frameId||this._resume()},h.componentWillUnmount=function(){window.cancelAnimationFrame(this._frameId),this._frameId=0},h.render=function(){var e=this.props,i=e.style,n=e.className,o=e.fill,p=e.children,h=e.id,u=s(e,a);/*#__PURE__*/return t.createElement("div",{style:r({width:"100%",display:"inline-block"},i),className:n,id:h,ref:this._container},/*#__PURE__*/t.createElement("svg",{width:"100%",height:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},p,/*#__PURE__*/t.createElement("path",r({d:this.state.path,fill:o},u))))},p}(e),p=o,h=i,u=["options"],l={height:20,amplitude:20,speed:.15,points:3},c=function(e){var i=e.options,n=s(e,u);/*#__PURE__*/return t.createElement(p,r({},l,i,n))};c.defaultProps={paused:!1,fill:"#fff"},c.displayName="Wave",c.propTypes={paused:h.bool,fill:h.string,options:h.object};export{c as default};
