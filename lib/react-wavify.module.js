import t,{Component as e}from"react";function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},i.apply(this,arguments)}function n(t,e){return n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(t,e)}function r(t,e){if(null==t)return{};var i,n,r={},s=Object.keys(t);for(n=0;n<s.length;n++)e.indexOf(i=s[n])>=0||(r[i]=t[i]);return r}var s=["style","className","fill","paused","children","id","d","ref","height","amplitude","speed","points"],a=/*#__PURE__*/function(e){var a,o;function h(i){var n;return(n=e.call(this,i)||this)._width=function(){return n._container.current.offsetWidth},n._height=function(){return n._container.current.offsetHeight},n._container=t.createRef(),n.state={path:""},n._lastUpdate=0,n._elapsed=0,n._step=0,n._update=n._update.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}o=e,(a=h).prototype=Object.create(o.prototype),a.prototype.constructor=a,n(a,o);var p=h.prototype;return p._calculateWavePoints=function(){for(var t=[],e=0;e<=Math.max(this.props.points,1);e++){var i=e/this.props.points*this._width(),n=(this._step+(e+e%this.props.points))*this.props.speed*100,r=Math.sin(n/100)*this.props.amplitude,s=Math.sin(n/100)*r+this.props.height;t.push({x:i,y:s})}return t},p._buildPath=function(t){var e="M "+t[0].x+" "+t[0].y,i={x:(t[1].x-t[0].x)/2,y:t[1].y-t[0].y+t[0].y+(t[1].y-t[0].y)},n=function(t,e){return" C "+t.x+" "+t.y+" "+t.x+" "+t.y+" "+e.x+" "+e.y};e+=n(i,t[1]);for(var r=i,s=1;s<t.length-1;s++)e+=n(r={x:t[s].x-r.x+t[s].x,y:t[s].y-r.y+t[s].y},t[s+1]);return(e+=" L "+this._width()+" "+this._height())+" L 0 "+this._height()+" Z"},p._redraw=function(){this.setState({path:this._buildPath(this._calculateWavePoints())})},p._draw=function(){if(!this.props.paused){var t=new Date;this._elapsed+=t-this._lastUpdate,this._lastUpdate=t}this._step=this._elapsed*Math.PI/1e3,this._redraw()},p._update=function(){this._draw(),this._frameId&&this._resume()},p._resume=function(){this._frameId=window.requestAnimationFrame(this._update),this._lastUpdate=new Date},p.componentDidMount=function(){this._frameId||this._resume()},p.componentWillUnmount=function(){window.cancelAnimationFrame(this._frameId),this._frameId=0},p.render=function(){var e=this.props,n=e.style,a=e.className,o=e.fill,h=e.children,p=e.id,u=r(e,s);/*#__PURE__*/return t.createElement("div",{style:i({width:"100%",display:"inline-block"},n),className:a,id:p,ref:this._container},/*#__PURE__*/t.createElement("svg",{width:"100%",height:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h,/*#__PURE__*/t.createElement("path",i({d:this.state.path,fill:o},u))))},h}(e),o=a,h=["options"],p={height:20,amplitude:20,speed:.15,points:3},u=function(e){var n=e.options,s=r(e,h);/*#__PURE__*/return t.createElement(o,i({},p,n,s))};u.defaultProps={paused:!1,fill:"#fff"};export{u as default};
