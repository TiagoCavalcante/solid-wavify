{"mappings":"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","sources":["src/index.tsx","src/wave.tsx"],"sourcesContent":["import WaveBase from './wave';\nimport type { BaseWaveProps, WaveHTMLProps } from './wave';\nimport { splitProps } from 'solid-js';\n\nconst defaults = {\n  height: 20,\n  amplitude: 20,\n  speed: 0.15,\n  points: 3,\n};\n\nexport type WaveProps = WaveHTMLProps\n  & Pick<BaseWaveProps, \"fill\" | \"paused\">\n  & { options: Partial<Omit<BaseWaveProps, \"fill\" | \"paused\">>; };\n\nexport default function Wave(props: WaveProps) {\n  const [local, rest] = splitProps(props, [\"fill\", \"paused\", \"options\"])\n\n  return (\n    <WaveBase\n      fill={local.fill}\n      paused={local.paused}\n      {...defaults}\n      {...local.options}\n      {...rest}\n    />\n  );\n}\n","import {\n  createSignal,\n  mergeProps,\n  onCleanup,\n  onMount,\n  splitProps\n} from 'solid-js';\nimport type { JSX, PropsWithChildren } from 'solid-js';\n\nexport type Point = {\n  x: number,\n  y: number;\n};\n\nexport type BaseWaveProps = {\n  style: JSX.CSSProperties,\n  className: string,\n  fill: JSX.IntrinsicElements[\"path\"][\"fill\"],\n  paused: Boolean,\n  id: string,\n  ref: HTMLDivElement | null,\n  height: number,\n  amplitude: number,\n  speed: number,\n  points: number,\n};\n\nexport type WaveHTMLProps = Omit<\n  JSX.IntrinsicElements[\"path\"],\n  keyof BaseWaveProps | \"children\"\n>;\n\nexport type WaveProps = Partial<BaseWaveProps & WaveHTMLProps>;\n\nexport default function Wave(baseProps: PropsWithChildren<WaveProps>) {\n  const props = mergeProps({\n    amplitude: 20,\n    height: 20,\n    points: 3,\n    speed: 0.15,\n  }, baseProps);\n\n  const [local, rest] = splitProps(props, [\n    \"amplitude\",\n    \"height\",\n    \"points\",\n    \"speed\",\n\n    \"style\",\n    \"className\",\n    \"fill\",\n    \"paused\",\n    \"children\",\n    \"id\",\n    \"ref\",\n  ]);\n\n  const [path, setPath] = createSignal('');\n\n  let lastUpdate = 0;\n  let elapsed = 0;\n  let step = 0;\n  let frameId = 0;\n\n  function calculateWavePoints() {\n    const pointList = [];\n    for (let i = 0; i <= Math.max(local.points, 1); i++) {\n      const scale = 100;\n      const x = i / local.points * getWidth();\n      const seed = (step + (i + i % local.points)) * local.speed * scale;\n      const currentHeight = Math.sin(seed / scale) * local.amplitude;\n      const y = Math.sin(seed / scale) * currentHeight + local.height;\n      pointList.push({ x, y });\n    }\n    return pointList;\n  }\n\n  function buildPath(points: Array<Point>) {\n    let svg = `M ${points[0].x} ${points[0].y}`;\n    const initial = {\n      x: (points[1].x - points[0].x) / 2,\n      y: (points[1].y - points[0].y) + points[0].y + (points[1].y - points[0].y)\n    };\n    const cubic = (a: Point, b: Point) => ` C ${a.x} ${a.y} ${a.x} ${a.y} ${b.x} ${b.y}`;\n    svg += cubic(initial, points[1]);\n    let point = initial;\n    for (let i = 1; i < points.length - 1; i++) {\n      point = {\n        x: (points[i].x - point.x) + points[i].x,\n        y: (points[i].y - point.y) + points[i].y\n      };\n      svg += cubic(point, points[i + 1]);\n    }\n    svg += ` L ${getWidth()} ${getHeight()}`;\n    svg += ` L 0 ${getHeight()} Z`;\n    return svg;\n  }\n\n  const getWidth = () => local.ref!.offsetWidth;\n  const getHeight = () => local.ref!.offsetHeight;\n\n  function redraw() {\n    setPath(buildPath(calculateWavePoints()));\n  }\n\n  function draw() {\n    if (!local.paused) {\n      const now = new Date().getTime();\n      elapsed += now - lastUpdate;\n      lastUpdate = now;\n    }\n    const scale = 1000;\n    step = elapsed * Math.PI / scale;\n    redraw();\n  }\n\n  function update() {\n    draw();\n\n    if (frameId) resume();\n  }\n\n  function resume() {\n    frameId = window.requestAnimationFrame(update);\n    lastUpdate = new Date().getTime();\n  }\n\n  onMount(() => {\n    if (!frameId) resume();\n  });\n\n  onCleanup(() => {\n    window.cancelAnimationFrame(frameId);\n    frameId = 0;\n  });\n\n  return (\n    <div\n      style={{ width: '100%', display: 'inline-block', ...local.style }}\n      className={local.className}\n      id={local.id}\n      ref={local.ref!}\n    >\n      <svg\n        width=\"100%\"\n        height=\"100%\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        {local.children}\n        <path d={path()} fill={local.fill} {...rest} />\n      </svg>\n    </div>\n  );\n}\n"],"names":["WaveBase","BaseWaveProps","WaveHTMLProps","splitProps","defaults","height","amplitude","speed","points","WaveProps","Pick","options","Partial","Omit","Wave","props","local","rest","fill","paused","createSignal","mergeProps","onCleanup","onMount","JSX","PropsWithChildren","Point","x","y","style","CSSProperties","className","IntrinsicElements","Boolean","id","ref","HTMLDivElement","baseProps","path","setPath","lastUpdate","elapsed","step","frameId","calculateWavePoints","pointList","i","Math","max","scale","getWidth","seed","currentHeight","sin","push","buildPath","Array","svg","initial","cubic","a","b","point","length","getHeight","offsetWidth","offsetHeight","redraw","draw","now","Date","getTime","PI","update","resume","window","requestAnimationFrame","cancelAnimationFrame","children","width","display"],"version":3,"file":"index.js.map"}